# M√≥dulo Embrapa I/O DevOps - BMAD

**Vers√£o**: 1.0.0
**Tipo**: Standard Module
**Autor**: BMAD Team
**Licen√ßa**: MIT

## üéØ Vis√£o Geral

O **M√≥dulo Embrapa I/O** √© um **M√ìDULO DE CONHECIMENTO** BMAD que garante ader√™ncia √† plataforma Embrapa I/O em aplica√ß√µes de **qualquer linguagem ou framework**.

### O que √© um M√≥dulo de Conhecimento?

Um m√≥dulo de conhecimento **N√ÉO cria aplica√ß√µes diretamente**. Em vez disso, ele **instrui outros agentes** sobre como criar aplica√ß√µes conformes atrav√©s de:

- üìö **Conhecimento t√©cnico** sobre padr√µes da plataforma
- üìã **Templates** adapt√°veis para qualquer stack
- üîÑ **Workflows reutiliz√°veis** invocados automaticamente
- ‚úÖ **Valida√ß√µes** que garantem conformidade
- üîå **Integra√ß√µes** com ferramentas do ecossistema

### Como Funciona?

1. **Agentes BMAD existentes** (scaffolding, cria√ß√£o, etc.) **carregam o conhecimento** deste m√≥dulo
2. Durante a cria√ß√£o de aplica√ß√µes, eles **invocam automaticamente** os workflows do m√≥dulo
3. O m√≥dulo fornece **templates e valida√ß√µes** que funcionam com **qualquer linguagem/framework**
4. Resultado: **Aplica√ß√µes conformes** sem necessidade de agentes espec√≠ficos por stack

## üèóÔ∏è Arquitetura do M√≥dulo

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AGENTES BMAD EXISTENTES (Qualquer Linguagem/Stack)    ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  ‚Ä¢ Scaffold Agent  ‚Ä¢ Creation Agents  ‚Ä¢ QA Agent       ‚îÇ
‚îÇ  ‚Ä¢ DevOps Agent    ‚Ä¢ Migration Agents                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ Carregam conhecimento
                     ‚îÇ Invocam workflows
                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  M√ìDULO EMBRAPA I/O (Conhecimento)                     ‚îÇ
‚îÇ                                                          ‚îÇ
‚îÇ  üìö Knowledge Base  ‚Üí  Padr√µes e regras                 ‚îÇ
‚îÇ  üîÑ Workflows       ‚Üí  Gera√ß√£o autom√°tica de arquivos   ‚îÇ
‚îÇ  üìã Templates       ‚Üí  Adapt√°veis para qualquer stack   ‚îÇ
‚îÇ  ‚úÖ Validations     ‚Üí  Garantia de conformidade         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                     ‚îÇ
                     ‚ñº
         Aplica√ß√µes Conformes (Node.js, Python, React,
              Vue.js, PHP, .NET, Java, Go, etc.)
```

## üì¶ Componentes

### üìö Conhecimento (7 arquivos)

1. **embrapa-io-fundamentals.md** - As 4 verdades fundamentais da plataforma
2. **embrapa-io-integration-guide.md** - **üÜï Como agentes devem usar este m√≥dulo**
3. **embrapa-io-validation.md** - 38 regras de valida√ß√£o com severidades
4. **embrapa-io-workflows.md** - Workflows dispon√≠veis e como invoc√°-los
5. **embrapa-io-deployment.md** - Pipeline de 4 stages e comandos essenciais
6. **embrapa-io-stacks.md** - Stacks e suas particularidades
7. **embrapa-io-integrations.md** - Integra√ß√£o com Sentry, Matomo, SonarQube, Loki

### üîÑ Workflows (Invoc√°veis por Agentes)

Os workflows deste m√≥dulo s√£o **invocados automaticamente** por agentes durante a cria√ß√£o ou modifica√ß√£o de aplica√ß√µes.

#### SETUP (Gera√ß√£o Autom√°tica de Arquivos)
- **`generate-license`** - **‚úÖ IMPLEMENTADO** - Gera `LICENSE` com copyright da Embrapa
  - Executado silenciosamente (sem intera√ß√£o com usu√°rio)
  - Calcula ano atual automaticamente
  - Conte√∫do: `Copyright ‚ìí YYYY Brazilian Agricultural Research Corporation (Embrapa). All rights reserved.`

- **`generate-env-io`** - **‚úÖ IMPLEMENTADO** - Gera `.env.io` e `.env.io.example` com vari√°veis da plataforma
  - Invocado automaticamente durante cria√ß√£o de aplica√ß√µes
  - Solicita: IO_PROJECT, IO_APP, IO_DEPLOYER
  - Calcula: IO_VERSION (formato 0.YY.M-dev.1)
  - Cria ambos os arquivos automaticamente

#### VALIDATE (Valida√ß√£o de Conformidade)
- **`validate-compliance`** - **‚úÖ IMPLEMENTADO** - Valida√ß√£o completa de conformidade (38 regras)
- `validate-docker-compose` - **üìã PLANEJADO** - Valida√ß√£o espec√≠fica de docker-compose.yaml
- `validate-env-files` - **üìã PLANEJADO** - Valida√ß√£o de .env.io e .env
- `validate-settings` - **üìã PLANEJADO** - Valida√ß√£o de .embrapa/settings.json
- `validate-integrations` - **üìã PLANEJADO** - Valida√ß√£o de integra√ß√µes (Sentry, Matomo)
- `generate-compliance-report` - **üìã PLANEJADO** - Relat√≥rio de conformidade

#### ADD (Adicionar Funcionalidades)
- `add-embrapa-compliance` - **üìã PLANEJADO** - Adicionar conformidade a projeto existente
- `add-sentry-integration` - **üìã PLANEJADO** - Adicionar integra√ß√£o Sentry
- `add-matomo-integration` - **üìã PLANEJADO** - Adicionar integra√ß√£o Matomo
- `add-sonarqube-integration` - **üìã PLANEJADO** - Adicionar integra√ß√£o SonarQube
- `add-loki-integration` - **üìã PLANEJADO** - Adicionar integra√ß√£o Grafana Loki

#### MIGRATE (Migra√ß√£o de Projetos)
- `migrate-to-compliance` - **üìã PLANEJADO** - Migrar projeto n√£o-conforme para Embrapa I/O
- `migrate-stage` - **üìã PLANEJADO** - Migrar entre stages (development ‚Üí alpha ‚Üí beta ‚Üí release)

### üìã Templates (20 templates)

#### docker-compose (7)
- base.yaml, nodejs-api.yaml, vuejs-frontend.yaml, react-frontend.yaml, reactnative-mobile.yaml, dotnet-app.yaml, php-app.yaml

#### env (7)
- .env.io.example, .env.example, .env.nodejs.example, .env.vuejs.example, .env.react.example, .env.dotnet.example, .env.php.example

#### settings (3)
- settings-base.json, settings-nodejs.json, settings-frontend.json

#### integrations (4)
- sentry-config.js, matomo-tracking.js, sonarqube-properties, loki-config.yaml

## üöÄ Instala√ß√£o

### Pr√©-requisitos

- BMAD framework instalado
- Claude Code

### Instalar M√≥dulo

```bash
# Navegar para diret√≥rio de m√≥dulos BMAD
cd /caminho/para/bmad

# Copiar m√≥dulo embrapa-io
cp -r /caminho/para/embrapa-io ./embrapa-io

# Executar installer (a ser implementado)
./embrapa-io/install.sh
```

### O que a instala√ß√£o faz

1. ‚úÖ Cria estrutura de diret√≥rios do m√≥dulo
2. ‚úÖ Copia arquivos de conhecimento para os agentes (QA, PM, DevOps)
3. ‚úÖ Adiciona itens de menu nos agentes
4. ‚úÖ Registra workflows no BMAD
5. ‚úÖ Mostra tutorial de uso (opcional)

## üìñ Como Usar

### 1. Validar Projeto Existente

```bash
# Via QA Agent
bmad qa

# Menu: üîç Validar Conformidade Embrapa I/O
> Caminho do projeto: /caminho/para/meu-projeto
> Aplicar auto-fix: sim/n√£o

# Resultado:
# - validation-report-TIMESTAMP.json
# - compliance-summary-TIMESTAMP.md
# - Compliance Score: HIGH|MEDIUM|LOW
```

### 2. Criar Novo Projeto Node.js API

```bash
# Via PM Agent
bmad pm

# Menu: üöÄ Criar projeto Node.js API
> Nome do projeto: meu-projeto
> Nome da app: api
> Tipo de banco: mongodb|postgresql
> Porta: 3000
> Integra√ß√µes: sentry,matomo

# Resultado:
# - Estrutura completa do projeto
# - docker-compose.yaml conforme
# - .env files
# - C√≥digo base com exemplos
# - Compliance Score: HIGH
```

### 3. Adicionar Conformidade a Projeto Existente

```bash
# Via PM Agent
bmad pm

# Menu: ‚ûï Adicionar conformidade Embrapa I/O
> Caminho do projeto: /caminho/para/projeto-existente

# Resultado:
# - docker-compose.yaml ajustado/criado
# - .env files criados
# - .embrapa/settings.json criado
# - Relat√≥rio de mudan√ßas
```

### 4. Adicionar Integra√ß√£o Sentry

```bash
# Via DevOps Agent
bmad devops

# Menu: üö® Adicionar integra√ß√£o Sentry
> Caminho do projeto: /caminho/para/projeto
> Stack detectada: nodejs

# Resultado:
# - Sentry SDK instalado
# - Configura√ß√£o implementada
# - SENTRY_DSN em .env.io
# - Documenta√ß√£o de uso
```

## üìä Sistema de Valida√ß√£o

### Compliance Score

| Score | Crit√©rio | A√ß√£o Recomendada |
|-------|----------|------------------|
| **HIGH** üü¢ | 0 CRITICAL, 0 HIGH | Pronto para produ√ß√£o |
| **MEDIUM** üü° | 0 CRITICAL, ‚â§3 HIGH | Corrigir erros HIGH |
| **LOW** üî¥ | ‚â•1 CRITICAL ou >3 HIGH | Bloqueado para produ√ß√£o |

### 38 Regras de Valida√ß√£o

#### CRITICAL (8 regras)
- Arquivo docker-compose.yaml existe
- Campo 'version' ausente
- Network 'stack' externa com nome correto
- Arquivos .env.io.example e .env.example existem
- Sem duplica√ß√£o de vari√°veis entre .env files
- Arquivo .embrapa/settings.json existe e √© v√°lido

#### HIGH (14 regras)
- Servi√ßos conectados √† network 'stack'
- Volumes externos
- Sem container_name
- Healthchecks implementados
- Vari√°veis obrigat√≥rias presentes
- Conven√ß√£o de nomenclatura correta
- Integra√ß√µes Sentry e Matomo configuradas

#### MEDIUM (11 regras)
- Portas via vari√°veis
- CLI services com profiles
- .gitignore correto
- Data de valida√ß√£o atualizada
- Logo Embrapa presente (UI)

#### LOW (5 regras)
- Servi√ßos CLI recomendados
- SonarQube configurado
- Grafana Loki configurado

## üîå Integra√ß√µes Suportadas

| Integra√ß√£o | Tipo | Obrigat√≥rio | MCP |
|------------|------|-------------|-----|
| **Sentry** | Error Monitoring | ‚úÖ Sim | ‚úÖ |
| **Matomo** | Analytics | ‚úÖ Sim | ‚úÖ |
| **SonarQube** | Code Quality | ‚ùå N√£o | ‚úÖ |
| **Grafana Loki** | Logging | ‚ùå N√£o | ‚úÖ |

## üé® Stacks Suportadas

| Stack | Vers√µes | Banco Suportado | Difficulty |
|-------|---------|----------------|------------|
| Node.js + Express + MongoDB | 20.x, 4.x, 7.x | MongoDB | ‚≠ê‚≠ê |
| Node.js + Express + PostgreSQL | 20.x, 4.x, 17.x | PostgreSQL | ‚≠ê‚≠ê |
| Vue.js + Vuetify | 3.x, 3.x | N/A | ‚≠ê‚≠ê |
| React | 18.x | N/A | ‚≠ê‚≠ê |
| React Native | Latest | N/A | ‚≠ê‚≠ê‚≠ê |
| .NET Blazor | 8.x | SQL Server, PostgreSQL | ‚≠ê‚≠ê‚≠ê |
| PHP + Laravel | 8.2, 10.x | MySQL, PostgreSQL | ‚≠ê‚≠ê |

## üîÑ Pipeline de 4 Stages

| Stage | Auto-Deploy | Aprova√ß√£o | Uso |
|-------|-------------|-----------|-----|
| **development** | ‚úÖ Sim | ‚ùå N√£o | Desenvolvimento ativo |
| **alpha** | ‚ùå N√£o | ‚úÖ Tech Lead | Testes internos |
| **beta** | ‚ùå N√£o | ‚úÖ PO | Testes com usu√°rios |
| **release** | ‚ùå N√£o | ‚úÖ M√∫ltiplas | Produ√ß√£o |

## üìö Arquivos de Conhecimento

Todos os agentes enriquecidos ter√£o acesso a:

- `embrapa-io-fundamentals.md` - Fundamentos da plataforma
- `embrapa-io-validation.md` - Regras de valida√ß√£o
- `embrapa-io-workflows.md` - Workflows adaptativos
- `embrapa-io-deployment.md` - Deployment e comandos
- `embrapa-io-stacks.md` - Detalhes das stacks
- `embrapa-io-integrations.md` - Guias de integra√ß√£o

## üõ†Ô∏è Desenvolvimento

### Estrutura de Diret√≥rios

```
embrapa-io/
‚îú‚îÄ‚îÄ config.yaml                      # Configura√ß√£o do m√≥dulo
‚îú‚îÄ‚îÄ README.md                         # Este arquivo
‚îú‚îÄ‚îÄ knowledge/                        # Arquivos de conhecimento (6)
‚îÇ   ‚îú‚îÄ‚îÄ embrapa-io-fundamentals.md
‚îÇ   ‚îú‚îÄ‚îÄ embrapa-io-validation.md
‚îÇ   ‚îú‚îÄ‚îÄ embrapa-io-workflows.md
‚îÇ   ‚îú‚îÄ‚îÄ embrapa-io-deployment.md
‚îÇ   ‚îú‚îÄ‚îÄ embrapa-io-stacks.md
‚îÇ   ‚îî‚îÄ‚îÄ embrapa-io-integrations.md
‚îú‚îÄ‚îÄ workflows/                        # Workflows organizados (18)
‚îÇ   ‚îú‚îÄ‚îÄ validate/                     # 6 workflows
‚îÇ   ‚îú‚îÄ‚îÄ create/                       # 6 workflows
‚îÇ   ‚îú‚îÄ‚îÄ add/                          # 5 workflows
‚îÇ   ‚îî‚îÄ‚îÄ migrate/                      # 2 workflows
‚îú‚îÄ‚îÄ templates/                        # Templates (20)
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose/               # 7 templates
‚îÇ   ‚îú‚îÄ‚îÄ env/                          # 7 templates
‚îÇ   ‚îú‚îÄ‚îÄ settings/                     # 3 templates
‚îÇ   ‚îî‚îÄ‚îÄ integrations/                 # 4 templates
‚îú‚îÄ‚îÄ tasks/                            # Tasks reutiliz√°veis
‚îÇ   ‚îú‚îÄ‚îÄ validation/
‚îÇ   ‚îú‚îÄ‚îÄ scaffolding/
‚îÇ   ‚îî‚îÄ‚îÄ migration/
‚îî‚îÄ‚îÄ docs/                             # Documenta√ß√£o adicional
```

### Adicionar Novo Workflow

1. Criar diret√≥rio em `workflows/[categoria]/[workflow-name]/`
2. Criar `workflow.yaml` com configura√ß√£o
3. Criar `instructions.md` com instru√ß√µes detalhadas
4. Atualizar `config.yaml` na se√ß√£o `workflows`
5. Adicionar menu item no agente apropriado

### Adicionar Nova Stack

1. Criar template em `templates/docker-compose/[stack].yaml`
2. Criar vari√°veis em `templates/env/.env.[stack].example`
3. Documentar em `knowledge/embrapa-io-stacks.md`
4. Criar workflow `create-[stack]-app` em `workflows/create/`
5. Atualizar `config.yaml` na se√ß√£o `supported_stacks`

## üìã Roadmap

### Fase 1: Core (Atual - v1.0)
- [x] Arquivos de conhecimento completos
- [x] Sistema de valida√ß√£o (38 regras)
- [x] Workflow validate-compliance
- [x] Templates base
- [x] Config.yaml completo
- [ ] Workflows CREATE (6)
- [ ] Workflows ADD (5)
- [ ] Workflows MIGRATE (2)
- [ ] Installer/Uninstaller
- [ ] Testes de valida√ß√£o

### Fase 2: Scaffolding (v1.1)
- [ ] create-nodejs-api completo
- [ ] create-vuejs-frontend completo
- [ ] create-react-frontend completo
- [ ] Modo tutorial para Dev J√∫nior
- [ ] Auto-fix avan√ßado

### Fase 3: Integra√ß√µes (v1.2)
- [ ] MCP Sentry completo
- [ ] MCP Matomo completo
- [ ] MCP SonarQube completo
- [ ] MCP Grafana Loki completo
- [ ] Dashboard consolidado para Tech Lead

### Fase 4: Advanced (v2.0)
- [ ] Versionamento de .embrapa/config.yaml
- [ ] Smart templates com l√≥gica condicional
- [ ] CI/CD nativo
- [ ] Rollback autom√°tico
- [ ] Multi-project dashboard

## ü§ù Contribuindo

Este m√≥dulo segue os padr√µes BMAD. Para contribuir:

1. Fork o reposit√≥rio
2. Crie uma branch (`feature/nova-funcionalidade`)
3. Commit suas mudan√ßas
4. Push para a branch
5. Abra um Pull Request

## üìÑ Licen√ßa

MIT License - veja LICENSE para detalhes

## üÜò Suporte

- **Documenta√ß√£o**: `knowledge/` folder
- **Issues**: GitHub Issues
- **Discuss√µes**: GitHub Discussions

---

**Desenvolvido com** ‚ù§Ô∏è **usando BMAD Method**

**Vers√£o**: 1.0.0
**√öltima atualiza√ß√£o**: 2025-10-06
